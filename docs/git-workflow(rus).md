Правила для участников проекта
===================================

Если вы хотите поучаствовать в проекте, прочитайте этот гайд по настройке окружения и правильному оформлению pull requests.

Если вы плохо знакомы с системой контроля версий Git или хотите освежить свои знания воспользуйтесь разделом "Полезные ссылки" 


Настройка
------------------------------------


### 1. Сделайте [Fork](http://help.github.com/fork-a-repo/) репозитория в ваш GitHub и клонируйте его на свою локальную машину

```
git clone git@github.com:YOUR-GITHUB-USERNAME/thanks.git
```
или

```
git clone https://github.com/YOUR-GITHUB-USERNAME/thanks.git
```
Если у вас проблемы с настройкой интеграции Git с GitHub или вы видите ошибку "Permission Denied (publickey)" - 
воспользуйтесь гайдом: [настройка Git для работы с GitHub](http://help.github.com/linux-set-up-git/)



### 2. Добавьте основной удаленный репозиторий в качестве дополнительного с помощью "upstream"

Перейдите в директорию проекта и введите команду:

```
git remote add upstream git://github.com/alexey-goloburdin/thanks.git
```

### 3. Настройте рабочее окружение

Создайте виртуальное окружение в папке проекта, на основе вашего глобального интепретатора python
```
python3 -m venv venv
```
и активируйте его, использую команду для вашей оболочки shell
```
source venv/bin/activate
```
установите пакеты и зависимости используя pip

```
pip install -r requirements.txt
```

Работа над фичами 
----------------------------

Настроив свое рабочее окружение вы можете приступить к разработке!

### 1. Убедитесь, что под фичу или баг, над которым вы работаете, есть issue

Все новые фичи и баги должны быть связаны с какой-то issue (проблемой/задачей/тикетом). Это позволяет удобно организовать работу над задачей из единого места, найти всю историю пулл реквестов и комментариев других участников, а также самому поучаствовать в обсуждении проблемы.

Если вы нашли issue над которой хотели бы поработать, оставьте комментарий, чтобы другие участники знали, что вы работаете над этой проблемой. 

Если вы не нашли issue, но знаете как могли бы помочь проекту - создайте свою!

> Для небольших изменений (апдейт документации, опечатки) не нужно создавать issue, можно сразу сделать pull request


### 2. Обновите локальный код main ветки из удаленного репозитория

```
git pull upstream main
```

Всегда выполняйте эту команду перед новым pull request, это позволит убедиться, что вы работает с актуальным кодом проекта

### 3. Создайте новую ветку от main


Каждая фича или багфикс должен быть реализован в своей ветке. Имя ветки должно начинаться с номера issue, к которой относится ваш код и должно включать название проблемы.


Например:

```
git checkout upstream/main
git checkout -b 5-docs/git_workflow_rules
```

### 4. Напишите код!

Убедитесь что код работает :). Также проведите unit тестирование

### 5. Обновите CHANGELOG файл

Отредактируйте файл CHANGELOG, включив в него ваше изменение. Вставьте строчку о вашей доработке под заголовок в начало файла. Это должно выглядеть примерно так:

```
Bug #5: описание багфикса (Ваше имя)
Enh #5: описание фичи (Ваше имя)
```

`#5` это номер issue, у которой есть `Bug` (баг) или `Enh` (улучшение).
Такая структура помогает сгруппировать записи по (`Bug`,`Enh`) и отсотртировать по issue


### 6. Зафиксируйте свои изменения

Добавьте файлы/изменения которые вы хотите закомиттеть в [staging area](http://git.github.io/git-reference/basic/#add) с помощью

```
git add file.py
```

Вы можете использовать флаг `-p`, чтобы выбрать изменения, которые вы хотите видеть в своем коммите.

Зафиксируйте свои доработки/изменения с сообщением, описывающим их. Не забудьте указать номер issue с `#XXX`, чтобы GitHub
автоматически связал ваш commit с issue:

```
git commit -m "Add git contribution rules for #5 issue"
```

### 7. Обновите код

```
git pull upstream main
```

Еще раз убедитесь, что у вас актуальная версия кода прежде чем открывать pull request.
Разрешите конфликты, если они есть.

### 8. Отправьте свой код в GitHub

```
git push -u origin 5-docs/git_workflow_rules
```

Флаг `-u` гарантирует, что ваша ветка теперь будет автоматически отправлять и извлекать изменения из ветки удаленного репозитория GitHub. Это значит
если вы введете `git push` в следующий раз, git будет знать, куда отправлять новые изменения. Это полезно, если вы хотите позже добавить больше коммитов к совему pull request.


### 9. Откройте [pull request](https://help.github.com/articles/creating-a-pull-request-from-a-fork/).

Перейдите в свой репозиторий на GitHub и нажмите «Pull Request», выберите свою ветку и напишите краткий  комментарий о том, что вы сделали. Чтобы связать пулл-реквест с задачей, поместите в любое место комментария #5, где 5 –
номер issue.

> Каждый pull request должен быть направлен на доработку/изменение только одной проблемы! Хотите исправить несколько проблем - добавляйте еще pull request

### 10. Кто-то посмотрит ваш код

Кто-то проверит ваш код, и вас могут попросить внести некоторые изменения. Вам не нужно открывать
другой pull request, если ваш текущий все еще открыт. Если ваш код будет принят, он будет объединен с основной веткой, если нет, не расстраивайтесь, ваш код по-прежнему будет доступен на GitHub в качестве справочного материала для других разработчиков.

### 11. Удаление ветки

После того, как ваш код был либо принят, либо отклонен, вы можете удалить ветки с которыми вы работали в локальном и удаленном репозитории.

```
git checkout main
git branch -D 5-docs/git_workflow_rules
git push origin --delete 5-docs/git_workflow_rules
```


### Справочник всех команд

```
git clone git@github.com:YOUR-GITHUB-USERNAME/thanks.git
git remote add upstream git://github.com/yiisoft/thanks.git
```

```
git fetch upstream
git checkout upstream/main
git checkout -b branch-name-associated-with-feature

/* you code here */

git add thanks/my-feature.py
git commit -m "Feature to print money for #issue goes here"
git pull upstream main
git push -u origin branch-name-associated-with-feature
```

### Полезные ссылки:
 - [GitHub help](http://help.github.com/)
 - [About issues](https://docs.github.com/en/issues/tracking-your-work-with-issues/about-issues)
 - [Try Git](https://try.github.com)
 - [Git internal data model](http://nfarina.com/post/9868516270/git-is-simpler)